<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <title></title>
    <link href="../JavaScript/plugins/jqeasyui/themes/default/easyui.css" rel="stylesheet" />

    <link href="../Css/video-js.css" rel="stylesheet" />
    <script src="../scripts/jquery-1.8.3.min.js"></script>
    <script src="../JavaScript/plugins/jqeasyui/jquery.easyui.min.js"></script>
    <script src="../JavaScript/plugins/jqeasyui/locale/easyui-lang-zh_CN.js"></script>
    <script src="../JavaScript/plugins/jqeasyui/jquery.easyui.config.js"></script>
    <script src="../JavaScript/video.min.js"></script>
    <script type="text/javascript" src="Bro_Mp4.js"></script>
    <style>
    </style>
</head>
<body>
    <div class="easyui-layout" data-options="fit:true">
        <div data-options="region:'center'" style="border:none;background-color:black;">
            <video id="video" class="video-js vjs-default-skin vjs-big-play-centered"
                   controls style="width:100%;height:100%;"
                   poster="http://localhost:120/api/Songs/GetImage"
                   data-setup="{}">
                <source id="sou" src="http://localhost:120/api/Songs/GetVideo/1" type='video/mp4' />
            </video>
        </div>
    </div>
    <script type="text/javascript">
        var mIndex;
        $(function () {
            var urlinfo = window.location.href;
            var len = urlinfo.length;//获取url的长度   
            var offset = urlinfo.indexOf("?");//设置参数字符串开始的位置   
            var newsidinfo = urlinfo.substr(offset, len)//取出参数字符串 这里会获得类似“id=1”这样的字符串
            var newsids = newsidinfo.split("=");//对获得的参数字符串按照“=”进行分割
            mIndex = newsids[1];//得到参数值


            var mSrc = "http://localhost:120/api/Songs/GetVideo/" + mIndex;
            $("#sou").attr("src", mSrc);
            var myPlayer = videojs("video");  //初始化视频
            myPlayer.src(mSrc);  //重置video的src
            myPlayer.load(mSrc);  //使video重新加载
            myPlayer.play();
        })



    </script>
</body>

</html>
